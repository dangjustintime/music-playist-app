<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="MusicApp">
  <head>
    <meta charset="utf-8">
    <title>Hot 100</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js" charset="utf-8"></script>
    <script src="/js/app.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body ng-controller="MusicController as ctrl">
    <header>
      <h1>Check Out Your Favorite Hits!</h1>
    </header>
    <!-- Offer the user a login option if they're not logged in -->
    <div class="login" ng-if="!ctrl.currentUser">
      <a href="#" ng-click="loginAction=true;registerAction=false">Log In</a>
      <a href="#" ng-click="registerAction=true;loginAction=false">Register</a>
      <!-- Open the appropriate form once the user selects log in or register -->
      <div ng-if="loginAction">
        <form ng-submit="ctrl.logIn()">
          <input type="text" placeholder="username" ng-model="ctrl.loginUser">
          <input type="password" placeholder="password" ng-model="ctrl.loginPass">
          <input type="submit" value="Log In">
        </form>
      </div>
      <div ng-if="registerAction">
        <form ng-submit="ctrl.register()">
          <input type="text" placeholder="username" ng-model="ctrl.registerUser">
          <input type="password" placeholder="password" ng-model="ctrl.registerPass">
          <input type="submit" value="Register">
        </form>
      </div>
    </div>
    <!-- Friendly reminder to log in or register -->
    <div class="noUser" ng-if="!ctrl.currentUser">
      Please Log In or Register to create and access your custom playlist
    </div>
    <!-- Billboard search form -->
    <div class="billboard">
      Enter the date of billboard hits you wish to see
      <form ng-submit="ctrl.getBboard()">
        Month: <input type="number" placeholder="Month" ng-model="ctrl.month" min="1" max="12"><br/>
        Day: <input type="number" placeholder="Day" ng-model="ctrl.day" min="1" max="31"><br/>
        Year: <input type="number" placeholder="Year" ng-model="ctrl.year" min="1850" max="{{ctrl.getMaxYear()}}"><br/>
        <input type="submit" value="Get Results">
      </form>
    </div>

    <!-- Logout -->
    <button ng-click="ctrl.logout()" ng-if="ctrl.currentUser">Logout</button>



    <!-- Billboard results -->
    <div class="results" ng-if="ctrl.results">
      <ol class="resultsList">
        <li class="result" ng-repeat="song in ctrl.results">
          <img ng-src="{{song.cover}}" alt="cover of {{song.title}}" class="coverArt"/> <p>{{song.title}} By {{song.artist}}  </p>
          <button ng-click="ctrl.addSongToPlaylist(song)" ng-if="ctrl.currentUser">Add to Playlist</button>
        </li>
      </ol>
    </div>

    <!-- User playlist -->
    <div class="playlists" ng-if="ctrl.userPlaylist">
      <h2>Playlist</h2>
      <div class="playlistContainer">
        <div class="playlist" ng-repeat="song in ctrl.userPlaylist.songs">
          <img ng-src="{{song.cover}}" alt="cover of {{song.title}}" class="coverArt"/> <p>{{song.title}} By {{song.artist}}  </p>
        </div>
      </div>

    </div>
  </body>
</html>
